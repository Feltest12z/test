-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- FelixzUI 2.0 - Core Library (Updated Design)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Core Roblox Services
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local HttpService = game:GetService("HttpService")
local CoreGui = game:GetService("CoreGui")
local GuiService = game:GetService("GuiService")

local player = Players.LocalPlayer
local Stats = game:GetService("Stats")

-- Ø¬Ø¯ÙˆÙ„ Ù†Ø®Ø²Ù† ÙÙŠÙ‡ ÙƒÙ„ Ø¯ÙˆØ§Ù„ Ø§Ù„ØªÙˆØºÙ„Ø§Øª (Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯)
getgenv().ToggleSetters = getgenv().ToggleSetters or {}
getgenv().AllToggles = getgenv().AllToggles or {}
getgenv().FelixzLoops = getgenv().FelixzLoops or {}
getgenv().FelixzConnections = getgenv().FelixzConnections or {}


-- Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ« Ø£ÙŠ ØªÙˆØºÙ„ (Ù„Ù…Ø§ Ù†Ø­Ù…Ù„ config)
getgenv().UpdateToggle = function(name, value)
    local fn = getgenv().ToggleSetters[name]
    if fn then
        fn(value, true) -- true = Ù„Ø§ ØªØ´ØºÙ‘Ù„ Ø§Ù„Ø­Ø¯Ø« (Ù„Ø£Ù†Ù†Ø§ Ù†Ø­Ù…Ù‘Ù„)
    end
end

-- ðŸ—‚ï¸ Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø­ÙØ¸
local saveFolder = "workspace/FelixzHub/Configs"
if not isfolder("workspace/FelixzHub") then
    makefolder("workspace/FelixzHub")
end
if not isfolder(saveFolder) then
    makefolder(saveFolder)
end

-- --------------------------------------------------
-- ðŸŽ¨ Themes (ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø«ÙŠÙ…Ø§Øª Ù„ØªØ¨Ù†ÙŠ Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ø¬Ø¯ÙŠØ¯)
-- --------------------------------------------------

-- Ø«ÙŠÙ… Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù…Ù† Ø§Ù„Ù€ Settings
getgenv().Themes = {
    Dark = {
        Background = Color3.fromRGB(16, 18, 29),
        Accent     = Color3.fromRGB(30, 33, 50),
        Text       = Color3.fromRGB(240, 240, 255),
        Highlight  = Color3.fromRGB(105, 90, 205), -- Primary
        Hover      = Color3.fromRGB(125, 110, 225),
        Border     = Color3.fromRGB(55, 60, 85),
        Shadow     = Color3.fromRGB(5, 7, 15),
        Glow       = Color3.fromRGB(145, 130, 255),
        Success    = Color3.fromRGB(80, 220, 140),
        Danger     = Color3.fromRGB(255, 80, 100),
    },
    -- Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ø£Ø²Ø±Ù‚ Ø§Ù„Ø£ØµÙ„ÙŠ ÙƒÙ…Ø±Ø¬Ø¹
    Blue = {
        Background = Color3.fromRGB(10, 15, 25),
        Accent = Color3.fromRGB(20, 30, 50),
        Text = Color3.fromRGB(200, 220, 255),
        Highlight = Color3.fromRGB(70, 130, 255),
        Hover = Color3.fromRGB(100, 150, 255),
        Border = Color3.fromRGB(50, 70, 100),
        Shadow = Color3.fromRGB(0, 5, 15),
        Glow = Color3.fromRGB(100, 150, 255),
        Success = Color3.fromRGB(100, 200, 150),
        Danger = Color3.fromRGB(255, 100, 120),
    },
}
getgenv().CurrentTheme = getgenv().Themes.Dark
getgenv().ThemeUpdatables = getgenv().ThemeUpdatables or {}
getgenv().ExtraThemeFunctions = getgenv().ExtraThemeFunctions or {}

-- --------------------------------------------------
-- ðŸªŸ GUI Setup (Ø¨Ù†ÙŠØ© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©)
-- --------------------------------------------------

local FelixzUI = {}
FelixzUI.Version = "2.1"
FelixzUI.Author = "Felixz (Completed by Grok)"
local GUI_NAME = "FelixzHub"
local playerGui = player:FindFirstChildOfClass("PlayerGui") or player:WaitForChild("PlayerGui")
local gui, window, container, titleBar -- Ù…ØªØºÙŠØ±Ø§Øª Ù„ØªØ®Ø²ÙŠÙ† Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

-- ====== ðŸ§¹ Ø­Ø°Ù Ø£ÙŠ Ù†Ø³Ø® Ù‚Ø¯ÙŠÙ…Ø© Ù…Ù† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ======
local function removeOldGUIs()
    local oldInCore = game.CoreGui:FindFirstChild(GUI_NAME)
    if oldInCore then oldInCore:Destroy() end
    local oldInPlayer = playerGui:FindFirstChild(GUI_NAME)
    if oldInPlayer then oldInPlayer:Destroy() end
    for _, gui in ipairs(game.CoreGui:GetChildren()) do
        if gui.Name == "FelixzHubNotifications" then gui:Destroy() end
    end
    for _, gui in ipairs(playerGui:GetChildren()) do
        if gui.Name == "FelixzHubNotifications" then gui:Destroy() end
    end
end
pcall(removeOldGUIs)

-- ðŸ”„ Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø³ÙŠØ· Ù„Ù„ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø­ÙØ°ÙØª ØªÙ…Ø§Ù…Ø§Ù‹
repeat
    task.wait(0.1)
until not game.CoreGui:FindFirstChild(GUI_NAME)
    and not playerGui:FindFirstChild(GUI_NAME)

task.wait(0.5)

-- ==========================================
-- ðŸªŸ Ø¥Ù†Ø´Ø§Ø¡ GUI Ø¬Ø¯ÙŠØ¯ (Ø§Ù„Ù€ ScreenGui)
-- ==========================================
gui = Instance.new("ScreenGui")
gui.Name = GUI_NAME
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
gui.DisplayOrder = 9999

local uiScale = Instance.new("UIScale", gui)
uiScale.Name = "UIScale"

local ok, err = pcall(function()
    gui.Parent = CoreGui
end)
if not ok then
    warn("âš ï¸ Ù„Ù… ÙŠÙ…ÙƒÙ† ÙˆØ¶Ø¹ FelixzHub ÙÙŠ CoreGui: " .. tostring(err))
    gui.Parent = playerGui
end

-- ðŸ“± ØªØ­Ø¯ÙŠØ¯ Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø² + ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ù‚ÙŠØ§Ø³
local function getDeviceType(returnEmoji)
    if GuiService:IsTenFootInterface() then
        return "Console", "ðŸŽ®"
    elseif UserInputService.TouchEnabled then
        local cam = workspace.CurrentCamera
        local screenSize = cam and cam.ViewportSize or Vector2.new(1920, 1080)
        if screenSize.X >= 1000 or screenSize.Y >= 700 then
            return "Tablet", "ðŸ“²"
        else
            return "Mobile", "ðŸ“±"
        end
    else
        return "PC", "ðŸ’»"
    end
end

local function applyScaleByDevice()
    local device = getDeviceType()
    local scaleByDevice = {
        PC = 0.95,
        Tablet = 0.85,
        Mobile = 0.7,
        Console = 1.0
    }
    uiScale.Scale = scaleByDevice[device] or 0.9
end

applyScaleByDevice()
workspace.CurrentCamera:GetPropertyChangedSignal("ViewportSize"):Connect(applyScaleByDevice)

-- --------------------------------------------------
-- ðŸ“¨ Notification System (ØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡ Ù„ÙŠØªØ·Ø§Ø¨Ù‚ Ù…Ø¹ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯)
-- --------------------------------------------------

local notifGui = Instance.new("ScreenGui")
notifGui.Name = "FelixzHubNotifications"
notifGui.ResetOnSpawn = false
notifGui.IgnoreGuiInset = true
notifGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local ok, err = pcall(function()
	notifGui.Parent = CoreGui
end)
if not ok then
	notifGui.Parent = playerGui
end

local notifHolder = Instance.new("Frame")
notifHolder.Name = "NotificationHolder"
notifHolder.Size = UDim2.new(0, 320, 1, -20)
notifHolder.Position = UDim2.new(1, -340, 0, 20)
notifHolder.BackgroundTransparency = 1
notifHolder.BorderSizePixel = 0
notifHolder.ZIndex = 1000
notifHolder.Parent = notifGui

local list = Instance.new("UIListLayout")
list.SortOrder = Enum.SortOrder.LayoutOrder
list.Padding = UDim.new(0, 8)
list.VerticalAlignment = Enum.VerticalAlignment.Top
list.Parent = notifHolder

getgenv().notifGui = notifGui
getgenv().notifHolder = notifHolder

function FelixzUI:Notify(Title, Text, Duration, Icon, ColorType)
    local theme = getgenv().CurrentTheme
    local iconImage = Icon or "rbxassetid://4483345998" -- Default gear
    local iconColor = theme.Highlight
    local bgTransparency = 0
    Duration = Duration or 3

    -- If using ColorType for quick status
    if ColorType == "Success" then iconColor = theme.Success
    elseif ColorType == "Danger" then iconColor = theme.Danger
    elseif ColorType == "Primary" then iconColor = theme.Highlight end

    local Frame = Instance.new("Frame")
    Frame.Size = UDim2.new(0, 290, 0, 65)
    Frame.BackgroundColor3 = theme.Accent
    Frame.BackgroundTransparency = 1
    Frame.BorderSizePixel = 0
    Frame.LayoutOrder = tick()
    Frame.ZIndex = 100
    Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 10)
    Frame.Parent = notifHolder

    local IconLabel = Instance.new("ImageLabel", Frame)
    IconLabel.Size = UDim2.new(0, 45, 0, 45)
    IconLabel.Position = UDim2.new(0, 10, 0.5, -22)
    IconLabel.BackgroundTransparency = 1
    IconLabel.Image = iconImage
    IconLabel.ImageColor3 = iconColor
    IconLabel.ImageTransparency = 1
    Instance.new("UICorner", IconLabel).CornerRadius = UDim.new(0, 8)

    local TitleLabel = Instance.new("TextLabel", Frame)
    TitleLabel.Text = Title
    TitleLabel.Font = Enum.Font.GothamBold
    TitleLabel.TextSize = 15
    TitleLabel.TextColor3 = theme.Text
    TitleLabel.BackgroundTransparency = 1
    TitleLabel.Position = UDim2.new(0, 65, 0, 8)
    TitleLabel.Size = UDim2.new(1, -70, 0, 20)
    TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
    TitleLabel.TextTransparency = 1

    local TextLabel = Instance.new("TextLabel", Frame)
    TextLabel.Text = Text
    TextLabel.Font = Enum.Font.Gotham
    TextLabel.TextSize = 13
    TextLabel.TextColor3 = theme.Highlight
    TextLabel.BackgroundTransparency = 1
    TextLabel.Position = UDim2.new(0, 65, 0, 32)
    TextLabel.Size = UDim2.new(1, -70, 0, 25)
    TextLabel.TextWrapped = true
    TextLabel.TextXAlignment = Enum.TextXAlignment.Left
    TextLabel.TextTransparency = 1

    -- âœ¨ Ø¯Ø®ÙˆÙ„ Ù†Ø§Ø¹Ù…
    TweenService:Create(Frame, TweenInfo.new(0.3), {BackgroundTransparency = bgTransparency}):Play()
    TweenService:Create(IconLabel, TweenInfo.new(0.3), {ImageTransparency = 0}):Play()
    TweenService:Create(TitleLabel, TweenInfo.new(0.3), {TextTransparency = 0}):Play()
    TweenService:Create(TextLabel, TweenInfo.new(0.3), {TextTransparency = 0}):Play()

    -- â³ Ø®Ø±ÙˆØ¬ Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ø¯Ø©
    task.delay(Duration, function()
        if Frame and Frame.Parent then
            TweenService:Create(Frame, TweenInfo.new(0.3), {BackgroundTransparency = 1}):Play()
            TweenService:Create(IconLabel, TweenInfo.new(0.3), {ImageTransparency = 1}):Play()
            TweenService:Create(TitleLabel, TweenInfo.new(0.3), {TextTransparency = 1}):Play()
            TweenService:Create(TextLabel, TweenInfo.new(0.3), {TextTransparency = 1}):Play()
            task.wait(0.35)
            Frame:Destroy()
        end
    end)
end
getgenv().showNotification = FelixzUI.Notify -- Ø±Ø¨Ø· Ø§Ù„Ø¯Ø§Ù„Ø© Ø¨Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø®Ù„ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ÙØ±Ø³Ù„

-- --------------------------------------------------
-- ðŸ§  Main Functions
-- --------------------------------------------------

function FelixzUI:CreateWindow(Config)
    Config = Config or {}
    Config.Name = Config.Name or "Felixz Hub"
    Config.KeySystem = Config.KeySystem or false
    Config.Key = Config.Key or "FELIXZ-BETA-2025"

    local Window = {}
    Window.Tabs = {}
    Window.KeyVerified = not Config.KeySystem

    -- âš ï¸ Ù‡Ù†Ø§ Ø³ÙŠØªÙ… ÙˆØ¶Ø¹ Key System Ø§Ù„Ù‚Ø¯ÙŠÙ… Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙØ¹Ù„Ø§Ù‹
    if Config.KeySystem and not isfile("felixz_key.txt") then
        -- (Ù‡Ù†Ø§ Ù†Ø¶Ø¹ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚Ø¯ÙŠÙ… Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙØªØ§Ø­ Ù…Ù† Ù…ÙƒØªØ¨ØªÙƒ Ø§Ù„Ø£ØµÙ„ÙŠØ©)
        -- Ù†ÙÙØªØ±Ø¶ Ø£Ù†Ùƒ Ù„Ø§ ØªØ±ÙŠØ¯ ØªØºÙŠÙŠØ± ØªØµÙ…ÙŠÙ… Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¢Ù†ØŒ Ù„Ø°Ø§ Ù†Ø³ØªØ®Ø¯Ù…Ù‡ ÙƒÙ…Ø§ Ù‡Ùˆ Ù…Ø¹ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ù„Ù„Ø«ÙŠÙ… Ø§Ù„Ø¬Ø¯ÙŠØ¯
        local KeyGui = Instance.new("ScreenGui")
        KeyGui.Name = "FelixzKeySystem"
        KeyGui.Parent = CoreGui

        local Frame = Instance.new("Frame", KeyGui)
        Frame.Size = UDim2.new(0, 420, 0, 240)
        Frame.Position = UDim2.new(0.5, -210, 0.5, -120)
        Frame.BackgroundColor3 = getgenv().CurrentTheme.Accent
        Frame.BorderSizePixel = 0
        Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 16)

        local Glow = Instance.new("ImageLabel", Frame)
        Glow.Size = UDim2.new(1, 60, 1, 60)
        Glow.Position = UDim2.new(0.5, -30, 0.5, -30)
        Glow.AnchorPoint = Vector2.new(0.5, 0.5)
        Glow.BackgroundTransparency = 1
        Glow.Image = "rbxassetid://4996891970"
        Glow.ImageColor3 = getgenv().CurrentTheme.Glow
        Glow.ImageTransparency = 0.6
        Glow.ZIndex = 0

        local Title = Instance.new("TextLabel", Frame)
        Title.Text = Config.Name .. " â€“ Key System"
        Title.Font = Enum.Font.GothamBold
        Title.TextSize = 24
        Title.TextColor3 = getgenv().CurrentTheme.Text
        Title.BackgroundTransparency = 1
        Title.Size = UDim2.new(1, 0, 0, 50)
        Title.Position = UDim2.new(0, 0, 0, 20)

        local Input = Instance.new("TextBox", Frame)
        Input.PlaceholderText = "Enter your key..."
        Input.Size = UDim2.new(0, 360, 0, 50)
        Input.Position = UDim2.new(0.5, -180, 0.5, -25)
        Input.BackgroundColor3 = getgenv().CurrentTheme.Border
        Input.TextColor3 = getgenv().CurrentTheme.Text
        Input.Font = Enum.Font.Gotham
        Input.TextSize = 18
        Instance.new("UICorner", Input).CornerRadius = UDim.new(0, 12)

        local Submit = Instance.new("TextButton", Frame)
        Submit.Text = "Verify"
        Submit.Size = UDim2.new(0, 360, 0, 50)
        Submit.Position = UDim2.new(0.5, -180, 1, -80)
        Submit.BackgroundColor3 = getgenv().CurrentTheme.Highlight
        Submit.TextColor3 = Color3.new(1,1,1)
        Submit.Font = Enum.Font.GothamBold
        Submit.TextSize = 18
        Instance.new("UICorner", Submit).CornerRadius = UDim.new(0, 12)

        Submit.MouseEnter:Connect(function()
            TweenService:Create(Submit, TweenInfo.new(0.2), {BackgroundColor3 = getgenv().CurrentTheme.Hover}):Play()
        end)
        Submit.MouseLeave:Connect(function()
            TweenService:Create(Submit, TweenInfo.new(0.2), {BackgroundColor3 = getgenv().CurrentTheme.Highlight}):Play()
        end)

        Submit.MouseButton1Click:Connect(function()
            if Input.Text == Config.Key then
                writefile("felixz_key.txt", "verified")
                KeyGui:Destroy()
                Window.KeyVerified = true
                FelixzUI:Notify("Success", "Key accepted! Welcome to Felixz Hub! ðŸŒŸ", 4, "rbxassetid://6031075938", "Success")
                Window:Init()
            else
                FelixzUI:Notify("Error", "Invalid key! Try again.", 4, "rbxassetid://6035048640", "Danger")
                Input.Text = ""
            end
        end)

        Input.FocusLost:Connect(function()
            if Input.Text == Config.Key then Submit.MouseButton1Click:Fire() end
        end)

        return Window
    end

    if isfile("felixz_key.txt") then
        Window.KeyVerified = true
        FelixzUI:Notify("Welcome Back", "Key verified automatically! ðŸ˜Š", 2)
    end

    -- Create Main Window
    function Window:Init()
        -- ðŸŒŸ Fancy Loading Screen
        local loadingFrame = Instance.new("Frame")
        loadingFrame.Name = "LoadingFrame"
        loadingFrame.Size = UDim2.new(0, 420, 0, 140)
        loadingFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
        loadingFrame.AnchorPoint = Vector2.new(0.5, 0.5)
        loadingFrame.BackgroundColor3 = getgenv().CurrentTheme.Background
        loadingFrame.BackgroundTransparency = 1
        loadingFrame.BorderSizePixel = 0
        loadingFrame.ClipsDescendants = true
        loadingFrame.Parent = gui
        Instance.new("UICorner", loadingFrame).CornerRadius = UDim.new(0, 16)

        local shadow = Instance.new("ImageLabel", loadingFrame)
        shadow.AnchorPoint = Vector2.new(0.5, 0.5)
        shadow.Position = loadingFrame.Position
        shadow.Size = UDim2.new(1, 40, 1, 40)
        shadow.BackgroundTransparency = 1
        shadow.Image = "rbxassetid://1316045217"
        shadow.ImageColor3 = getgenv().CurrentTheme.Shadow
        shadow.ImageTransparency = 1
        shadow.ScaleType = Enum.ScaleType.Slice
        shadow.SliceCenter = Rect.new(10, 10, 118, 118)
        shadow.ZIndex = loadingFrame.ZIndex - 1
        shadow.Parent = loadingFrame

        local bgGrad = Instance.new("UIGradient", loadingFrame)
        bgGrad.Color = ColorSequence.new {
            ColorSequenceKeypoint.new(0, getgenv().CurrentTheme.Highlight),
            ColorSequenceKeypoint.new(1, getgenv().CurrentTheme.Background)
        }
        bgGrad.Rotation = 45

        local label = Instance.new("TextLabel", loadingFrame)
        label.Size = UDim2.new(1, -40, 0, 30)
        label.Position = UDim2.new(0.5, 0, 0.25, 0)
        label.AnchorPoint = Vector2.new(0.5, 0)
        label.BackgroundTransparency = 1
        label.Text = "Ø¬Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„... 0%"
        label.TextColor3 = getgenv().CurrentTheme.Text
        label.Font = Enum.Font.GothamBold
        label.TextScaled = true
        label.ZIndex = 2

        local glowText = Instance.new("UIStroke", label)
        glowText.Color = getgenv().CurrentTheme.Glow
        glowText.Thickness = 1.2
        glowText.Transparency = 0.5

        local barBg = Instance.new("Frame", loadingFrame)
        barBg.Size = UDim2.new(1, -40, 0, 20)
        barBg.Position = UDim2.new(0.5, 0, 0.65, 0)
        barBg.AnchorPoint = Vector2.new(0.5, 0)
        barBg.BackgroundColor3 = getgenv().CurrentTheme.Accent
        barBg.BorderSizePixel = 0
        Instance.new("UICorner", barBg).CornerRadius = UDim.new(0, 10)

        local bar = Instance.new("Frame", barBg)
        bar.Size = UDim2.new(0, 0, 1, 0)
        bar.BackgroundColor3 = getgenv().CurrentTheme.Highlight
        bar.BackgroundTransparency = 0.1
        Instance.new("UICorner", bar).CornerRadius = UDim.new(0, 10)

        local barStroke = Instance.new("UIStroke", bar)
        barStroke.Color = getgenv().CurrentTheme.Text
        barStroke.Transparency = 0.85
        barStroke.Thickness = 1

        local shimmer = Instance.new("UIGradient", bar)
        shimmer.Color = ColorSequence.new {
            ColorSequenceKeypoint.new(0, getgenv().CurrentTheme.Highlight),
            ColorSequenceKeypoint.new(0.5, Color3.fromRGB(255, 255, 255)),
            ColorSequenceKeypoint.new(1, getgenv().CurrentTheme.Highlight)
        }
        shimmer.Rotation = 0
        getgenv().FelixzLoops["ShimmerAnim"] = task.spawn(function()
            while shimmer.Parent do
                for i = -1, 1, 0.05 do
                    shimmer.Offset = Vector2.new(i, 0)
                    task.wait(0.05)
                end
            end
        end)

        -- âœ¨ Ø¯Ø®ÙˆÙ„ Ø£Ù†ÙŠÙ…ÙŠØ´Ù†
        TweenService:Create(loadingFrame, TweenInfo.new(0.8, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
            BackgroundTransparency = 0,
            Size = UDim2.new(0, 420, 0, 140),
            Position = UDim2.new(0.5, 0, 0.5, 0)
        }):Play()
        TweenService:Create(shadow, TweenInfo.new(0.8, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            ImageTransparency = 0.6
        }):Play()

        -- ØªØ­Ù…ÙŠÙ„ ØªØ¯Ø±ÙŠØ¬ÙŠ
        local totalTime, steps = 3, 30
        for i = 1, steps do
            local progress = math.floor((i / steps) * 100)
            label.Text = ("Ø¬Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„... %d%%"):format(progress)
            TweenService:Create(bar, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                Size = UDim2.new(progress / 100, 0, 1, 0)
            }):Play()
            task.wait(totalTime / steps)
        end

        local ding = Instance.new("Sound", loadingFrame)
        ding.SoundId = "rbxassetid://232127604"
        ding.Volume = 2
        pcall(function() ding:Play() end)

        local greetings = {
            "Ù…Ù†ÙˆØ± ÙŠØ§ %s ðŸŒ¹",
            "Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹ ÙÙŠÙƒ ÙŠØ§ %s ðŸ‘‹",
            "Ø±Ø¬Ø¹Øª Ù„Ù†Ø§ ÙŠØ§ %s ðŸ˜Ž",
            "ÙƒÙŠÙ Ø­Ø§Ù„Ùƒ ÙŠØ§ %sØŸ ðŸŒŸ",
            "Ù†ÙˆØ±Øª Ø§Ù„Ù…ÙƒØ§Ù† ÙŠØ§ %s âœ¨",
            "ÙŠÙˆÙ… Ø¬Ù…ÙŠÙ„ ÙŠØ§ %s ðŸŒž",
            "ÙŠØ§Ù‡Ù„Ø§ Ø¨Ù€ %s ðŸ™Œ",
            "Ø±Ø¬Ø¹Øª Ø§Ù„Ø£Ø³Ø·ÙˆØ±Ø© %s ðŸ”¥"
        }

        local randomMsg = greetings[math.random(1, #greetings)]
        label.Text = randomMsg:format(player.Name)

        TweenService:Create(label, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
            TextSize = 28,
            TextTransparency = 0
        }):Play()
        TweenService:Create(bar, TweenInfo.new(0.3), {
            BackgroundColor3 = getgenv().CurrentTheme.Success
        }):Play()

        task.wait(1.0)

        -- Ø®Ø±ÙˆØ¬ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
        TweenService:Create(loadingFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
            Position = UDim2.new(0.5, 0, -0.2, 0),
            BackgroundTransparency = 1
        }):Play()
        TweenService:Create(shadow, TweenInfo.new(0.4), { ImageTransparency = 1 }):Play()

        task.wait(0.6)
        pcall(function() loadingFrame:Destroy() end)

        -- --------------------------------------------------
        -- ðŸªŸ Main Window (Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø¨ØªØµÙ…ÙŠÙ… Ø§Ù„Ù†ÙŠÙˆÙ†)
        -- --------------------------------------------------

        window = Instance.new("Frame")
        window.Name = "MainWindow"
        window.AnchorPoint = Vector2.new(0.5, 0.5)
        window.Position = UDim2.new(0.5, 0, 0.5, 0)
        window.Size = UDim2.new(0, 560, 0, 420)
        window.BackgroundColor3 = getgenv().CurrentTheme.Background
        window.BackgroundTransparency = 0.15
        window.BorderSizePixel = 0
        window.ClipsDescendants = true
        window.ZIndex = 5
        Instance.new("UICorner", window).CornerRadius = UDim.new(0, 18)
        window.Parent = gui

        local wStroke = Instance.new("UIStroke", window)
        wStroke.Thickness = 3.2
        wStroke.Transparency = 0.05
        wStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
        wStroke.Color = getgenv().CurrentTheme.Highlight

        local gradient = Instance.new("UIGradient", wStroke)
        gradient.Rotation = 0
        gradient.Color = ColorSequence.new({
            ColorSequenceKeypoint.new(0.00, getgenv().CurrentTheme.Highlight),
            ColorSequenceKeypoint.new(0.25, Color3.fromRGB(255, 255, 255)),
            ColorSequenceKeypoint.new(0.50, getgenv().CurrentTheme.Highlight),
            ColorSequenceKeypoint.new(0.75, getgenv().CurrentTheme.Highlight),
            ColorSequenceKeypoint.new(1.00, getgenv().CurrentTheme.Highlight)
        })

        local glowWindow = Instance.new("ImageLabel", window)
        glowWindow.Name = "NeonGlow"
        glowWindow.Size = UDim2.new(1, 70, 1, 70)
        glowWindow.Position = UDim2.new(0.5, 0, 0.5, 0)
        glowWindow.AnchorPoint = Vector2.new(0.5, 0.5)
        glowWindow.BackgroundTransparency = 1
        glowWindow.Image = "rbxassetid://4996891970"
        glowWindow.ImageColor3 = getgenv().CurrentTheme.Highlight
        glowWindow.ImageTransparency = 0.6
        glowWindow.ZIndex = 4

        local function updateWindowNeonColor()
            local t = getgenv().CurrentTheme
            wStroke.Color = t.Highlight
            glowWindow.ImageColor3 = t.Highlight
            gradient.Color = ColorSequence.new({
                ColorSequenceKeypoint.new(0.00, t.Highlight),
                ColorSequenceKeypoint.new(0.25, Color3.fromRGB(255, 255, 255)),
                ColorSequenceKeypoint.new(0.50, t.Highlight),
                ColorSequenceKeypoint.new(0.75, t.Highlight),
                ColorSequenceKeypoint.new(1.00, t.Highlight)
            })
            window.BackgroundColor3 = t.Background
        end
        updateWindowNeonColor()
        table.insert(getgenv().ExtraThemeFunctions, updateWindowNeonColor)

        getgenv().FelixzLoops["NeonGlowAnim"] = task.spawn(function()
            while window.Parent do
                gradient.Rotation = (gradient.Rotation + 2) % 360
                task.wait(0.03)
            end
        end)

        -- --------------------------------------------------
        -- ðŸ“Œ Draggable Logic (Ù…Ù†Ø·Ù‚ Ø§Ù„Ø³Ø­Ø¨)
        -- --------------------------------------------------
        local dragging, dragStart, startPos
        window.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 and not minimized then
                dragging = true
                dragStart = input.Position
                startPos = window.Position
                input.Changed:Connect(function()
                    if input.UserInputState == Enum.UserInputState.End then dragging = false end
                end)
            end
        end)
        getgenv().FelixzConnections["DragInputChanged"] = UserInputService.InputChanged:Connect(function(input)
            if dragging and input.UserInputType == Enum.UserInputType.MouseMovement and not minimized then
                local delta = input.Position - dragStart
                window.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
            end
        end)


        -- --------------------------------------------------
        -- ðŸ“Š Title Bar (Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¬Ø¯ÙŠØ¯)
        -- --------------------------------------------------
        titleBar = Instance.new("Frame")
        titleBar.Size = UDim2.new(1,0,0,38)
        titleBar.BackgroundColor3 = getgenv().CurrentTheme.Accent
        titleBar.BorderSizePixel = 0
        titleBar.ZIndex = 50
        titleBar.ClipsDescendants = true
        local titleCorner = Instance.new("UICorner", titleBar)
        titleCorner.CornerRadius = UDim.new(0,18, 0, 0) -- Top corners only (Adjusted to match your corner radius)
        titleBar.Parent = window

        local titleContainer = Instance.new("Frame", titleBar)
        titleContainer.Size = UDim2.new(1, -80, 1, 0)
        titleContainer.Position = UDim2.new(0, 14, 0, 0)
        titleContainer.BackgroundTransparency = 1
        titleContainer.ZIndex = 51

        local title = Instance.new("TextLabel", titleContainer)
        title.Text = Config.Name
        title.Font = Enum.Font.GothamBold
        title.TextSize = 16
        title.TextColor3 = getgenv().CurrentTheme.Text
        title.BackgroundTransparency = 1
        title.Size = UDim2.new(0, 100, 1, 0)
        title.TextXAlignment = Enum.TextXAlignment.Left

        local pingLabel = Instance.new("TextLabel", titleContainer)
        pingLabel.Text = "PING: 0ms"
        pingLabel.Font = Enum.Font.GothamBold
        pingLabel.TextSize = 14
        pingLabel.TextColor3 = getgenv().CurrentTheme.Text
        pingLabel.BackgroundTransparency = 1
        pingLabel.Size = UDim2.new(0, 100, 1, 0)
        pingLabel.Position = UDim2.new(0, 110, 0, 0)
        pingLabel.TextXAlignment = Enum.TextXAlignment.Left

        local fpsLabel = Instance.new("TextLabel", titleContainer)
        fpsLabel.Text = "FPS: 0"
        fpsLabel.Font = Enum.Font.GothamBold
        fpsLabel.TextSize = 14
        fpsLabel.TextColor3 = getgenv().CurrentTheme.Text
        fpsLabel.BackgroundTransparency = 1
        fpsLabel.Size = UDim2.new(0, 80, 1, 0)
        fpsLabel.Position = UDim2.new(0, 210, 0, 0)
        fpsLabel.TextXAlignment = Enum.TextXAlignment.Left

        local deviceLabel = Instance.new("TextLabel", titleContainer)
        local device, emoji = getDeviceType(true)
        deviceLabel.Text = "Device: " .. device .. " " .. emoji
        deviceLabel.Font = Enum.Font.GothamBold
        deviceLabel.TextSize = 14
        deviceLabel.TextColor3 = getgenv().CurrentTheme.Text
        deviceLabel.BackgroundTransparency = 1
        deviceLabel.Size = UDim2.new(0, 150, 1, 0)
        deviceLabel.Position = UDim2.new(0, 300, 0, 0)
        deviceLabel.TextXAlignment = Enum.TextXAlignment.Left

        local lastUpdate = tick()
        local frameCounter = 0
        getgenv().FelixzConnections["FPS_PING_Update"] = RunService.RenderStepped:Connect(function()
            frameCounter += 1
            local now = tick()

            if now - lastUpdate >= 0.25 then
                local fps = math.floor(frameCounter / (now - lastUpdate))
                frameCounter = 0
                lastUpdate = now

                local fpsColor = (fps >= 100 and Color3.fromRGB(0, 255, 0)) or (fps >= 60 and Color3.fromRGB(255, 220, 0)) or Color3.fromRGB(255, 80, 80)
                fpsLabel.TextColor3 = fpsColor
                fpsLabel.Text = "FPS: " .. tostring(fps)
            end

            local ok, val = pcall(function() return Stats.Network.ServerStatsItem["Data Ping"]:GetValue() end)
            if ok and val then
                local ping = math.floor(val)
                local pingColor = (ping <= 60 and Color3.fromRGB(0, 255, 0)) or (ping <= 130 and Color3.fromRGB(255, 220, 0)) or Color3.fromRGB(255, 80, 80)
                pingLabel.TextColor3 = pingColor
                pingLabel.Text = "PING: " .. ping .. "ms"
            end
        end)

        -- --------------------------------------------------
        -- âŒ Min/Close Buttons (Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠØ©)
        -- --------------------------------------------------

        local function makeTopBtn(txt, isClose)
            local theme = getgenv().CurrentTheme
            local b = Instance.new("TextButton")
            b.Text = txt
            b.Font = Enum.Font.GothamBold
            b.TextSize = 16
            b.TextColor3 = theme.Text
            b.AutoButtonColor = false
            b.Size = UDim2.fromOffset(32, 24)
            b.BackgroundColor3 = theme.Accent
            b.BorderSizePixel = 0
            b.ZIndex = 1000
            b.Parent = titleBar
            Instance.new("UICorner", b).CornerRadius = UDim.new(0, 6)

            local uiStroke = Instance.new("UIStroke", b)
            uiStroke.Color = theme.Highlight
            uiStroke.Thickness = 1
            uiStroke.Transparency = 0.4

            b.MouseEnter:Connect(function()
                local t = getgenv().CurrentTheme
                TweenService:Create(b, TweenInfo.new(0.2, Enum.EasingStyle.Quad), {
                    Size = UDim2.fromOffset(36, 26),
                    BackgroundColor3 = isClose and Color3.fromRGB(200, 60, 60) or t.Hover,
                    TextColor3 = Color3.fromRGB(255, 255, 255)
                }):Play()
            end)

            b.MouseLeave:Connect(function()
                local t = getgenv().CurrentTheme
                TweenService:Create(b, TweenInfo.new(0.2, Enum.EasingStyle.Quad), {
                    Size = UDim2.fromOffset(32, 24),
                    BackgroundColor3 = t.Accent,
                    TextColor3 = t.Text
                }):Play()
            end)

            return b
        end

        local closeBtn = makeTopBtn("X", true)
        closeBtn.AnchorPoint = Vector2.new(1, 0)
        closeBtn.Position = UDim2.new(1, -6, 0.5, -12)

        local minBtn = makeTopBtn("â€”", false)
        minBtn.AnchorPoint = Vector2.new(1, 0)
        minBtn.Position = UDim2.new(1, -46, 0.5, -12)

        local minimized = false

        -- ðŸ§© Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ ÙˆØ§Ù„ØªØµØºÙŠØ± (ØªÙ… Ø¯Ù…Ø¬ Ù…Ù†Ø·Ù‚Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯)
        local isConfirmationOpen = false

        local function closeGUIWithAnimation()
            local theme = getgenv().CurrentTheme
            local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)

            -- Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªÙˆØºÙ„Ø§Øª
            if getgenv().AllToggles then
                for toggleName, toggleState in pairs(getgenv().AllToggles) do
                    if toggleState == true then
                        local setter = getgenv().ToggleSetters and getgenv().ToggleSetters[toggleName]
                        if setter then setter(false, true) end
                    end
                end
            end
            -- Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù€ loops
            if getgenv().FelixzLoops then
                for name, thread in pairs(getgenv().FelixzLoops) do
                    pcall(function() task.cancel(thread) end)
                end
            end

            -- Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø¥ØºÙ„Ø§Ù‚
            if window and window.Parent then
                local centerTween = TweenService:Create(window, TweenInfo.new(0.25, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), { Position = UDim2.new(0.5, 0, 0.5, 0) })
                centerTween:Play()
                centerTween.Completed:Wait()

                TweenService:Create(window, tweenInfo, { BackgroundTransparency = 1, Size = UDim2.fromOffset(0, 0) }):Play()
            end

            task.wait(0.5)

            -- Ø§Ù„ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
            pcall(function()
                if getgenv().FelixzConnections then
                    for _, conn in pairs(getgenv().FelixzConnections) do if typeof(conn) == "RBXScriptConnection" then pcall(function() conn:Disconnect() end) end end
                    getgenv().FelixzConnections = nil
                end
                getgenv().ToggleSetters = nil
                getgenv().AllToggles = nil
                getgenv().FelixzLoops = nil
            end)

            if gui and gui.Parent then gui:Destroy() end
        end

        local function showConfirmation()
            if isConfirmationOpen then return end
            isConfirmationOpen = true
            local theme = getgenv().CurrentTheme

            window.Active = false
            window.Selectable = false

            local confirmFrame = Instance.new("Frame")
            confirmFrame.Size = UDim2.fromOffset(0, 0)
            confirmFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
            confirmFrame.AnchorPoint = Vector2.new(0.5, 0.5)
            confirmFrame.BackgroundColor3 = theme.Accent
            confirmFrame.BorderSizePixel = 0
            confirmFrame.ZIndex = 10000
            confirmFrame.ClipsDescendants = true
            confirmFrame.Parent = gui
            Instance.new("UICorner", confirmFrame).CornerRadius = UDim.new(0, 16)

            local stroke = Instance.new("UIStroke", confirmFrame)
            stroke.Color = theme.Highlight
            stroke.Thickness = 1.5
            stroke.Transparency = 0.3

            -- âœ¨ Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø¯Ø®ÙˆÙ„
            TweenService:Create(confirmFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
                Size = UDim2.fromOffset(300, 150)
            }):Play()
            task.wait(0.5)

            local titleConfirm = Instance.new("TextLabel", confirmFrame)
            titleConfirm.Text = "ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚"
            titleConfirm.Font = Enum.Font.GothamBold
            titleConfirm.TextSize = 20
            titleConfirm.TextColor3 = theme.Text
            titleConfirm.BackgroundTransparency = 1
            titleConfirm.Size = UDim2.new(1, 0, 0, 40)
            titleConfirm.Position = UDim2.new(0, 0, 0, 10)

            local msgConfirm = Instance.new("TextLabel", confirmFrame)
            msgConfirm.Text = "Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©ØŸ Ø³ÙŠØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙˆØºÙ„Ø§Øª."
            msgConfirm.Font = Enum.Font.Gotham
            msgConfirm.TextSize = 13
            msgConfirm.TextColor3 = theme.Text
            msgConfirm.BackgroundTransparency = 1
            msgConfirm.Size = UDim2.new(1, -20, 0, 40)
            msgConfirm.Position = UDim2.new(0, 10, 0, 45)
            msgConfirm.TextWrapped = true

            local close = Instance.new("TextButton", confirmFrame)
            close.Text = "Ø¥ØºÙ„Ø§Ù‚"
            close.Size = UDim2.fromOffset(100, 30)
            close.Position = UDim2.new(1, -110, 1, -40)
            close.BackgroundColor3 = theme.Danger
            close.TextColor3 = Color3.new(1, 1, 1)
            Instance.new("UICorner", close).CornerRadius = UDim.new(0, 6)

            local cancel = Instance.new("TextButton", confirmFrame)
            cancel.Text = "Ø¥Ù„ØºØ§Ø¡"
            cancel.Size = UDim2.fromOffset(100, 30)
            cancel.Position = UDim2.new(1, -215, 1, -40)
            cancel.BackgroundColor3 = theme.Highlight
            cancel.TextColor3 = Color3.new(1, 1, 1)
            Instance.new("UICorner", cancel).CornerRadius = UDim.new(0, 6)

            local function hideConfirmation()
                TweenService:Create(confirmFrame, TweenInfo.new(0.3, Enum.EasingStyle.Sine, Enum.EasingDirection.In), {
                    Size = UDim2.fromOffset(0, 0),
                    BackgroundTransparency = 1
                }):Play()
                task.wait(0.3)
                confirmFrame:Destroy()
                isConfirmationOpen = false
                window.Active = true
                window.Selectable = true
            end

            close.MouseButton1Click:Connect(function()
                closeGUIWithAnimation()
                isConfirmationOpen = false
            end)

            cancel.MouseButton1Click:Connect(hideConfirmation)
        end
        closeBtn.MouseButton1Click:Connect(showConfirmation)


        minBtn.MouseButton1Click:Connect(function()
            minimized = not minimized
            local targetSize = UDim2.new(0, 560, 0, 420)
            local targetHeight = minimized and 38 or targetSize.Y.Offset

            if minimized then
                pcall(function() dragging = false end)
                if container then container.Visible = false end
            end

            local t = TweenService:Create(window, TweenInfo.new(0.18, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), {
                Size = UDim2.fromOffset(window.AbsoluteSize.X, targetHeight)
            })
            t:Play()

            t.Completed:Wait()

            if not minimized and container then
                container.Visible = true
            end

            minBtn.Text = minimized and "â–¢" or "â€”"
        end)


        -- --------------------------------------------------
        -- ðŸ“‘ Tabs and Content (Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø£Ù„Ø³Ù†Ø© ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰)
        -- --------------------------------------------------

        -- Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„ÙƒØ¨ÙŠØ±Ø© Ù„Ù„Ø£Ù„Ø³Ù†Ø© ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰ (Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù†Ø§ÙØ°Ø© ØªØ­Øª Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù†ÙˆØ§Ù†)
        container = Instance.new("Frame", window)
        container.Name = "MainContentContainer"
        container.Size = UDim2.new(1, 0, 1, -38)
        container.Position = UDim2.new(0, 0, 0, 38)
        container.BackgroundTransparency = 1

        local TabButtons = Instance.new("Frame", container)
        TabButtons.Name = "TabButtons"
        TabButtons.Size = UDim2.new(0, 150, 1, -20)
        TabButtons.Position = UDim2.new(0, 10, 0, 10)
        TabButtons.BackgroundTransparency = 1
        local TabList = Instance.new("UIListLayout", TabButtons)
        TabList.Padding = UDim.new(0, 8)
        TabList.SortOrder = Enum.SortOrder.LayoutOrder

        local TabContent = Instance.new("Frame", container)
        TabContent.Name = "TabContent"
        TabContent.Size = UDim2.new(1, -170, 1, -20)
        TabContent.Position = UDim2.new(0, 160, 0, 10)
        TabContent.BackgroundTransparency = 1
        TabContent.ClipsDescendants = true

        -- âœ¨ Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¨Ø¹Ø¯ Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
        if Window.KeyVerified then
            window.Visible = true
            local targetSize = window.Size
            window.Size = UDim2.new(0, 0, 0, 0)
            window.AnchorPoint = Vector2.new(0.5, 0.5)
            window.Position = UDim2.new(0.5, 0, 0.5, 0)

            TweenService:Create(window, TweenInfo.new(0.9, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
                Size = targetSize
            }):Play()

            local flash = Instance.new("Frame")
            flash.Size = UDim2.fromScale(1, 1)
            flash.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            flash.BackgroundTransparency = 0.2
            flash.BorderSizePixel = 0
            flash.ZIndex = 10
            flash.Parent = window
            TweenService:Create(flash, TweenInfo.new(0.8, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                BackgroundTransparency = 1
            }):Play()

            FelixzUI:Notify("ðŸ“± Device Detected", "ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ø¬Ù‡Ø§Ø²Ùƒ: "..device.." "..emoji, 3, nil, "Primary")
        end


        -- Create Tab Function
        function Window:CreateTab(TabConfig)
            TabConfig = TabConfig or {}
            TabConfig.Name = TabConfig.Name or "Tab"
            TabConfig.Icon = TabConfig.Icon or "rbxassetid://4483345998"

            local Tab = {}
            Tab.Sections = {}
            Tab.Active = false

            local Button = Instance.new("TextButton")
            Button.Name = TabConfig.Name
            Button.Size = UDim2.new(1, 0, 0, 45)
            Button.Position = UDim2.new(0, 0, 0, (#Window.Tabs * 50))
            Button.BackgroundColor3 = getgenv().CurrentTheme.Accent
            Button.BorderSizePixel = 0
            Button.Text = ""
            Button.AutoButtonColor = false
            Button.LayoutOrder = #Window.Tabs
            local BtnCorner = Instance.new("UICorner", Button)
            BtnCorner.CornerRadius = UDim.new(0, 10)

            local BtnStroke = Instance.new("UIStroke", Button)
            BtnStroke.Color = getgenv().CurrentTheme.Highlight
            BtnStroke.Thickness = 1
            BtnStroke.Transparency = 0.5
            Button.Parent = TabButtons
            Tab.Button = Button
            Tab.BtnStroke = BtnStroke

            local Icon = Instance.new("ImageLabel", Button)
            Icon.Size = UDim2.new(0, 24, 0, 24)
            Icon.Position = UDim2.new(0, 10, 0.5, -12)
            Icon.BackgroundTransparency = 1
            Icon.Image = TabConfig.Icon
            Icon.ImageColor3 = getgenv().CurrentTheme.Text

            local Name = Instance.new("TextLabel", Button)
            Name.Text = TabConfig.Name
            Name.Font = Enum.Font.GothamSemibold
            Name.TextSize = 14
            Name.TextColor3 = getgenv().CurrentTheme.Text
            Name.BackgroundTransparency = 1
            Name.Size = UDim2.new(1, -50, 1, 0)
            Name.Position = UDim2.new(0, 40, 0, 0)
            Name.TextXAlignment = Enum.TextXAlignment.Left

            -- Content Frame
            local Content = Instance.new("ScrollingFrame")
            Content.Name = "Content"
            Content.Size = UDim2.fromScale(1, 1)
            Content.Position = UDim2.new(0, 0, 0, 0)
            Content.BackgroundTransparency = 1
            Content.BorderSizePixel = 0
            Content.ScrollBarThickness = 6
            Content.ScrollBarImageColor3 = getgenv().CurrentTheme.Highlight
            Content.Visible = false
            Content.CanvasSize = UDim2.new(0, 0, 0, 0)
            Content.Parent = TabContent
            Tab.Content = Content

            local ContentLayout = Instance.new("UIListLayout", Content)
            ContentLayout.Padding = UDim.new(0, 10)
            ContentLayout.SortOrder = Enum.SortOrder.LayoutOrder

            -- Tab Switch
            Button.MouseButton1Click:Connect(function()
                for _, t in pairs(Window.Tabs) do
                    t.Content.Visible = false
                    TweenService:Create(t.Button, TweenInfo.new(0.2), {BackgroundColor3 = getgenv().CurrentTheme.Accent}):Play()
                    TweenService:Create(t.BtnStroke, TweenInfo.new(0.2), {Transparency = 0.5}):Play()
                    t.Active = false
                end
                Content.Visible = true
                TweenService:Create(Button, TweenInfo.new(0.2), {BackgroundColor3 = getgenv().CurrentTheme.Highlight}):Play()
                TweenService:Create(BtnStroke, TweenInfo.new(0.2), {Transparency = 0}):Play()
                Tab.Active = true
                FelixzUI:Notify("Tab Switched", "Opened " .. TabConfig.Name, 1, nil, "Primary")
            end)

            -- Auto-activate first tab
            if #Window.Tabs == 0 then
                Content.Visible = true
                Button.BackgroundColor3 = getgenv().CurrentTheme.Highlight
                BtnStroke.Transparency = 0
                Tab.Active = true
            end

            table.insert(Window.Tabs, Tab)

            ContentLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
                Content.CanvasSize = UDim2.new(0, 0, 0, ContentLayout.AbsoluteContentSize.Y + 20)
            end)

            -- Section Function
            function Tab:CreateSection(SectionConfig)
                SectionConfig = SectionConfig or {}
                SectionConfig.Name = SectionConfig.Name or "Section"

                local Section = {}

                local Frame = Instance.new("Frame")
                Frame.Name = SectionConfig.Name
                Frame.Size = UDim2.new(1, 0, 0, 40)
                Frame.BackgroundColor3 = getgenv().CurrentTheme.Accent
                Frame.BackgroundTransparency = 0.3
                Frame.BorderSizePixel = 0
                local FrameCorner = Instance.new("UICorner", Frame)
                FrameCorner.CornerRadius = UDim.new(0, 12)
                local FrameStroke = Instance.new("UIStroke", Frame)
                FrameStroke.Color = getgenv().CurrentTheme.Highlight
                FrameStroke.Thickness = 1
                FrameStroke.Transparency = 0.7
                Frame.Parent = Content
                Frame.LayoutOrder = #Tab.Sections + 1

                local Title = Instance.new("TextLabel", Frame)
                Title.Text = SectionConfig.Name
                Title.Font = Enum.Font.GothamBold
                Title.TextSize = 16
                Title.TextColor3 = getgenv().CurrentTheme.Text
                Title.BackgroundTransparency = 1
                Title.Size = UDim2.new(1, 0, 0, 35)
                Title.Position = UDim2.new(0, 15, 0, 5)
                Title.TextXAlignment = Enum.TextXAlignment.Left

                local Container = Instance.new("Frame", Frame)
                Container.Name = "Container"
                Container.Size = UDim2.new(1, -20, 1, -40)
                Container.Position = UDim2.new(0, 10, 0, 40)
                Container.BackgroundTransparency = 1
                Container.Parent = Frame
                local Layout = Instance.new("UIListLayout", Container)
                Layout.SortOrder = Enum.SortOrder.LayoutOrder
                Layout.Padding = UDim.new(0, 8)
                Layout.FillDirection = Enum.FillDirection.Vertical

                Layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
                    Frame.Size = UDim2.new(1, 0, 0, Layout.AbsoluteContentSize.Y + 50)
                end)

                -- Toggle Element (No change in logic, only colors/theme access)
                function Section:Toggle(ToggleConfig)
                    ToggleConfig = ToggleConfig or {}
                    ToggleConfig.Name = ToggleConfig.Name or "Toggle"
                    ToggleConfig.Default = ToggleConfig.Default or false
                    ToggleConfig.Callback = ToggleConfig.Callback or function() end

                    local Toggle = {}
                    local Value = ToggleConfig.Default
                    getgenv().AllToggles[ToggleConfig.Name] = Value

                    local Row = Instance.new("Frame")
                    Row.Size = UDim2.new(1, 0, 0, 35)
                    Row.BackgroundTransparency = 1
                    Row.Parent = Container

                    local Label = Instance.new("TextLabel", Row)
                    Label.Text = ToggleConfig.Name
                    Label.Font = Enum.Font.Gotham
                    Label.TextSize = 14
                    Label.TextColor3 = getgenv().CurrentTheme.Text
                    Label.BackgroundTransparency = 1
                    Label.Size = UDim2.new(1, -60, 1, 0)
                    Label.TextXAlignment = Enum.TextXAlignment.Left

                    local ToggleFrame = Instance.new("Frame", Row)
                    ToggleFrame.Size = UDim2.new(0, 40, 0, 20)
                    ToggleFrame.Position = UDim2.new(1, -50, 0.5, -10)
                    ToggleFrame.BackgroundColor3 = Value and getgenv().CurrentTheme.Success or getgenv().CurrentTheme.Danger
                    ToggleFrame.BorderSizePixel = 0
                    local ToggleCorner = Instance.new("UICorner", ToggleFrame)
                    ToggleCorner.CornerRadius = UDim.new(0, 10)

                    local Knob = Instance.new("Frame", ToggleFrame)
                    Knob.Size = UDim2.new(0, 16, 0, 16)
                    Knob.Position = Value and UDim2.new(1, -18, 0.5, -8) or UDim2.new(0, 2, 0.5, -8)
                    Knob.BackgroundColor3 = Color3.new(1,1,1)
                    Knob.BorderSizePixel = 0
                    local KnobCorner = Instance.new("UICorner", Knob)
                    KnobCorner.CornerRadius = UDim.new(0, 8)

                    local ClickBtn = Instance.new("TextButton", ToggleFrame)
                    ClickBtn.Size = UDim2.new(1, 0, 1, 0)
                    ClickBtn.BackgroundTransparency = 1
                    ClickBtn.Text = ""

                    local function toggle(newValue, isInternal)
                        Value = newValue
                        getgenv().AllToggles[ToggleConfig.Name] = Value
                        TweenService:Create(ToggleFrame, TweenInfo.new(0.2, Enum.EasingStyle.Quad), {
                            BackgroundColor3 = Value and getgenv().CurrentTheme.Success or getgenv().CurrentTheme.Danger
                        }):Play()
                        TweenService:Create(Knob, TweenInfo.new(0.2, Enum.EasingStyle.Quad), {
                            Position = Value and UDim2.new(1, -18, 0.5, -8) or UDim2.new(0, 2, 0.5, -8)
                        }):Play()
                        if not isInternal then
                            ToggleConfig.Callback(Value)
                            FelixzUI:Notify(ToggleConfig.Name, Value and "Enabled" or "Disabled", 1, nil, Value and "Success" or "Danger")
                        end
                    end

                    ClickBtn.MouseButton1Click:Connect(function()
                        toggle(not Value, false)
                    end)

                    ClickBtn.MouseEnter:Connect(function()
                        TweenService:Create(ToggleFrame, TweenInfo.new(0.1), {Size = UDim2.new(0, 42, 0, 22)}):Play()
                    end)
                    ClickBtn.MouseLeave:Connect(function()
                        TweenService:Create(ToggleFrame, TweenInfo.new(0.1), {Size = UDim2.new(0, 40, 0, 20)}):Play()
                    end)

                    function Toggle:Set(newValue, isInternal)
                        toggle(newValue, isInternal)
                    end

                    function Toggle:Get()
                        return Value
                    end

                    getgenv().ToggleSetters[ToggleConfig.Name] = toggle

                    return Toggle
                end

                -- Slider Element
                function Section:Slider(SliderConfig)
                    SliderConfig = SliderConfig or {}
                    SliderConfig.Name = SliderConfig.Name or "Slider"
                    SliderConfig.Min = SliderConfig.Min or 0
                    SliderConfig.Max = SliderConfig.Max or 100
                    SliderConfig.Default = SliderConfig.Default or 50
                    SliderConfig.Callback = SliderConfig.Callback or function() end

                    local Slider = {}
                    local Value = SliderConfig.Default
                    local Row = Instance.new("Frame")
                    Row.Size = UDim2.new(1, 0, 0, 50)
                    Row.BackgroundTransparency = 1
                    Row.Parent = Container

                    local Label = Instance.new("TextLabel", Row)
                    Label.Text = SliderConfig.Name
                    Label.Font = Enum.Font.Gotham
                    Label.TextSize = 14
                    Label.TextColor3 = getgenv().CurrentTheme.Text
                    Label.BackgroundTransparency = 1
                    Label.Size = UDim2.new(1, -60, 0, 20)
                    Label.Position = UDim2.new(0, 0, 0, 5)

                    local ValueLabel = Instance.new("TextLabel", Row)
                    ValueLabel.Text = tostring(Value)
                    ValueLabel.Font = Enum.Font.GothamBold
                    ValueLabel.TextSize = 14
                    ValueLabel.TextColor3 = getgenv().CurrentTheme.Highlight
                    ValueLabel.BackgroundTransparency = 1
                    ValueLabel.Size = UDim2.new(0, 50, 0, 20)
                    ValueLabel.Position = UDim2.new(1, -60, 0, 5)
                    ValueLabel.TextXAlignment = Enum.TextXAlignment.Right

                    local SliderFrame = Instance.new("Frame", Row)
                    SliderFrame.Size = UDim2.new(1, 0, 0, 8)
                    SliderFrame.Position = UDim2.new(0, 0, 0, 30)
                    SliderFrame.BackgroundColor3 = getgenv().CurrentTheme.Accent
                    SliderFrame.BorderSizePixel = 0
                    local SliderCorner = Instance.new("UICorner", SliderFrame)
                    SliderCorner.CornerRadius = UDim.new(0, 4)

                    local Percent = (Value - SliderConfig.Min) / (SliderConfig.Max - SliderConfig.Min)
                    local Fill = Instance.new("Frame", SliderFrame)
                    Fill.Size = UDim2.new(Percent, 0, 1, 0)
                    Fill.BackgroundColor3 = getgenv().CurrentTheme.Highlight
                    Fill.BorderSizePixel = 0
                    local FillCorner = Instance.new("UICorner", Fill)
                    FillCorner.CornerRadius = UDim.new(0, 4)

                    local Thumb = Instance.new("Frame", SliderFrame)
                    Thumb.Size = UDim2.new(0, 16, 0, 16)
                    Thumb.Position = UDim2.new(Percent, -8, -0.5, -4)
                    Thumb.BackgroundColor3 = Color3.new(1,1,1)
                    Thumb.BorderSizePixel = 0
                    local ThumbCorner = Instance.new("UICorner", Thumb)
                    ThumbCorner.CornerRadius = UDim.new(0, 8)

                    local SliderBtn = Instance.new("TextButton", SliderFrame)
                    SliderBtn.Size = UDim2.new(1, 0, 1, 0)
                    SliderBtn.BackgroundTransparency = 1
                    SliderBtn.Text = ""

                    local Dragging = false
                    SliderBtn.MouseButton1Down:Connect(function()
                        Dragging = true
                    end)
                    UserInputService.InputEnded:Connect(function(input)
                        if input.UserInputType == Enum.UserInputType.MouseButton1 then
                            Dragging = false
                        end
                    end)
                    UserInputService.InputChanged:Connect(function(input)
                        if Dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
                            local MouseX = input.Position.X
                            local SliderAbsX = SliderFrame.AbsolutePosition.X
                            local SliderWidth = SliderFrame.AbsoluteSize.X
                            local NewPercent = math.clamp((MouseX - SliderAbsX) / SliderWidth, 0, 1)
                            local NewValue = math.floor(SliderConfig.Min + (SliderConfig.Max - SliderConfig.Min) * NewPercent)
                            Value = NewValue
                            Fill.Size = UDim2.new(NewPercent, 0, 1, 0)
                            Thumb.Position = UDim2.new(NewPercent, -8, -0.5, -4)
                            ValueLabel.Text = tostring(NewValue)
                            SliderConfig.Callback(NewValue)
                        end
                    end)

                    function Slider:Set(newValue)
                        newValue = math.clamp(newValue, SliderConfig.Min, SliderConfig.Max)
                        Value = newValue
                        local NewPercent = (newValue - SliderConfig.Min) / (SliderConfig.Max - SliderConfig.Min)
                        Fill.Size = UDim2.new(NewPercent, 0, 1, 0)
                        Thumb.Position = UDim2.new(NewPercent, -8, -0.5, -4)
                        ValueLabel.Text = tostring(newValue)
                        SliderConfig.Callback(newValue)
                    end

                    function Slider:Get()
                        return Value
                    end

                    return Slider
                end

                -- Button Element
                function Section:Button(ButtonConfig)
                    ButtonConfig = ButtonConfig or {}
                    ButtonConfig.Name = ButtonConfig.Name or "Button"
                    ButtonConfig.Callback = ButtonConfig.Callback or function() end
                    ButtonConfig.Icon = ButtonConfig.Icon or nil

                    local Btn = Instance.new("TextButton")
                    Btn.Size = UDim2.new(1, 0, 0, 40)
                    Btn.BackgroundColor3 = getgenv().CurrentTheme.Highlight
                    Btn.BorderSizePixel = 0
                    Btn.Text = ButtonConfig.Name
                    Btn.Font = Enum.Font.GothamBold
                    Btn.TextSize = 14
                    Btn.TextColor3 = Color3.new(1,1,1)
                    Btn.AutoButtonColor = false
                    local BtnCorner = Instance.new("UICorner", Btn)
                    BtnCorner.CornerRadius = UDim.new(0, 8)
                    Btn.Parent = Container

                    if ButtonConfig.Icon then
                        local Icn = Instance.new("ImageLabel", Btn)
                        Icn.Size = UDim2.new(0, 20, 0, 20)
                        Icn.Position = UDim2.new(0, 10, 0.5, -10)
                        Icn.BackgroundTransparency = 1
                        Icn.Image = ButtonConfig.Icon
                        Btn.Text = "  " .. ButtonConfig.Name
                    end

                    Btn.MouseButton1Click:Connect(function()
                        TweenService:Create(Btn, TweenInfo.new(0.1, Enum.EasingStyle.Quad), {Size = UDim2.new(1, 0, 0, 36)}):Play()
                        task.wait(0.1)
                        TweenService:Create(Btn, TweenInfo.new(0.1, Enum.EasingStyle.Back), {Size = UDim2.new(1, 0, 0, 40)}):Play()
                        ButtonConfig.Callback()
                        FelixzUI:Notify(ButtonConfig.Name, "Clicked!", 1.5, nil, "Primary")
                    end)

                    Btn.MouseEnter:Connect(function()
                        TweenService:Create(Btn, TweenInfo.new(0.2), {BackgroundColor3 = getgenv().CurrentTheme.Hover}):Play()
                    end)
                    Btn.MouseLeave:Connect(function()
                        TweenService:Create(Btn, TweenInfo.new(0.2), {BackgroundColor3 = getgenv().CurrentTheme.Highlight}):Play()
                    end)

                    return Btn
                end

                table.insert(Tab.Sections, Section)
                return Section
            end

            return Tab
        end

        return Window
    end

    if Window.KeyVerified then
        Window:Init()
    end

    return Window
end

return FelixzUI
