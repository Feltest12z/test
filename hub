-- ══════════════════════════════════════════════
-- Felixz UI Library v3.0 - Full Neon Redesign
-- Made with love by Grok for Felixz
-- Usage: loadstring(game:HttpGet("https://raw.githubusercontent.com/Feltest12z/FelixzHub/main/Library.lua"))()
-- ══════════════════════════════════════════════

local FelixzUI = {}
FelixzUI.Version = "3.0 Neon"
FelixzUI.Author = "Felixz x Grok"

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")
local GuiService = game:GetService("GuiService")
local UIS = game:GetService("UserInputService")
local player = Players.LocalPlayer

-- ====== Themes ======
getgenv().Themes = {
    Dark = {
        Background = Color3.fromRGB(16, 18, 29),
        Accent = Color3.fromRGB(30, 33, 50),
        Text = Color3.fromRGB(240, 240, 255),
        Highlight = Color3.fromRGB(105, 90, 205),
        Hover = Color3.fromRGB(125, 110, 225),
        Border = Color3.fromRGB(55, 60, 85),
        Shadow = Color3.fromRGB(5, 7, 15),
        Glow = Color3.fromRGB(145, 130, 255)
    }
}
getgenv().CurrentTheme = getgenv().Themes.Dark

-- ====== Notification System ======
local notifGui = Instance.new("ScreenGui")
notifGui.Name = "FelixzHubNotifications"
notifGui.ResetOnSpawn = false
notifGui.IgnoreGuiInset = true
notifGui.Parent = CoreGui

local notifHolder = Instance.new("Frame", notifGui)
notifHolder.Size = UDim2.new(0, 320, 1, -20)
notifHolder.Position = UDim2.new(1, -340, 0, 20)
notifHolder.BackgroundTransparency = 1

local list = Instance.new("UIListLayout", notifHolder)
list.Padding = UDim.new(0, 8)
list.SortOrder = Enum.SortOrder.LayoutOrder
list.VerticalAlignment = Enum.VerticalAlignment.Top

getgenv().showNotification = function(title, text, duration)
    duration = duration or 4
    local theme = getgenv().CurrentTheme

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 290, 0, 65)
    frame.BackgroundColor3 = theme.Accent
    frame.BackgroundTransparency = 1
    frame.BorderSizePixel = 0
    frame.LayoutOrder = tick()
    frame.Parent = notifHolder
    Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 10)

    local titleLabel = Instance.new("TextLabel", frame)
    titleLabel.Text = title or "Notification"
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextSize = 15
    titleLabel.TextColor3 = theme.Text
    titleLabel.BackgroundTransparency = 1
    titleLabel.Position = UDim2.new(0, 15, 0, 8)
    titleLabel.Size = UDim2.new(1, -40, 0, 20)
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.TextTransparency = 1

    local msgLabel = Instance.new("TextLabel", frame)
    msgLabel.Text = text or ""
    msgLabel.Font = Enum.Font.Gotham
    msgLabel.TextSize = 13
    msgLabel.TextColor3 = theme.Highlight
    msgLabel.BackgroundTransparency = 1
    msgLabel.Position = UDim2.new(0, 15, 0, 32)
    msgLabel.Size = UDim2.new(1, -40, 0, 25)
    msgLabel.TextWrapped = true
    msgLabel.TextXAlignment = Enum.TextXAlignment.Left
    msgLabel.TextTransparency = 1

    local closeBtn = Instance.new("TextButton", frame)
    closeBtn.Text = "×"
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.TextSize = 20
    closeBtn.TextColor3 = theme.Text
    closeBtn.BackgroundTransparency = 1
    closeBtn.Position = UDim2.new(1, -25, 0, 5)
    closeBtn.Size = UDim2.new(0, 20, 0, 20)
    closeBtn.TextTransparency = 1

    TweenService:Create(frame, TweenInfo.new(0.3), {BackgroundTransparency = 0}):Play()
    TweenService:Create(titleLabel, TweenInfo.new(0.3), {TextTransparency = 0}):Play()
    TweenService:Create(msgLabel, TweenInfo.new(0.3), {TextTransparency = 0}):Play()
    TweenService:Create(closeBtn, TweenInfo.new(0.3), {TextTransparency = 0}):Play()

    closeBtn.MouseButton1Click:Connect(function()
        for _, obj in {frame, titleLabel, msgLabel, closeBtn} do
            TweenService:Create(obj, TweenInfo.new(0.25), {Transparency = 1}):Play()
        end
        task.wait(0.3)
        frame:Destroy()
    end)

    task.delay(duration, function()
        if frame and frame.Parent then
            for _, obj in {frame, titleLabel, msgLabel, closeBtn} do
                TweenService:Create(obj, TweenInfo.new(0.3), {Transparency = 1}):Play()
            end
            task.wait(0.35)
            frame:Destroy()
        end
    end)
end

-- ====== Main Window ======
function FelixzUI:CreateWindow(config)
    config = config or {}
    config.Name = config.Name or "Felixz Hub"

    local gui = Instance.new("ScreenGui")
    gui.Name = "FelixzHub"
    gui.ResetOnSpawn = false
    gui.IgnoreGuiInset = true
    gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    gui.DisplayOrder = 9999
    gui.Parent = CoreGui

    local uiScale = Instance.new("UIScale", gui)
    uiScale.Scale = 0.95

    -- Loading Screen
    local loading = Instance.new("Frame")
    loading.Size = UDim2.new(0, 420, 0, 140)
    loading.Position = UDim2.new(0.5, 0, 0.5, 0)
    loading.AnchorPoint = Vector2.new(0.5, 0.5)
    loading.BackgroundColor3 = getgenv().CurrentTheme.Background
    loading.BackgroundTransparency = 1
    loading.Parent = gui
    Instance.new("UICorner", loading).CornerRadius = UDim.new(0, 16)

    local label = Instance.new("TextLabel", loading)
    label.Size = UDim2.new(1, -40, 0, 30)
    label.Position = UDim2.new(0.5, 0, 0.25, 0)
    label.AnchorPoint = Vector2.new(0.5, 0)
    label.BackgroundTransparency = 1
    label.Text = "جار التحميل... 0%"
    label.TextColor3 = getgenv().CurrentTheme.Text
    label.Font = Enum.Font.GothamBold
    label.TextScaled = true

    local barBg = Instance.new("Frame", loading)
    barBg.Size = UDim2.new(1, -40, 0, 20)
    barBg.Position = UDim2.new(0.5, 0, 0.65, 0)
    barBg.AnchorPoint = Vector2.new(0.5, 0)
    barBg.BackgroundColor3 = getgenv().CurrentTheme.Accent
    Instance.new("UICorner", barBg).CornerRadius = UDim.new(0, 10)

    local bar = Instance.new("Frame", barBg)
    bar.Size = UDim2.new(0, 0, 1, 0)
    bar.BackgroundColor3 = getgenv().CurrentTheme.Highlight
    Instance.new("UICorner", bar).CornerRadius = UDim.new(0, 10)

    for i = 1, 100, 3 do
        label.Text = "جار التحميل... "..i.."%"
        TweenService:Create(bar, TweenInfo.new(0.1), {Size = UDim2.new(i/100, 0, 1, 0)}):Play()
        task.wait(0.03)
    end

    local greetings = {"منور يا "..player.DisplayName.."", "أهلاً وسهلاً يا "..player.DisplayName.."", "رجعت يا أسطورة "..player.DisplayName..""}
    label.Text = greetings[math.random(#greetings)]
    task.wait(1.5)
    loading:Destroy()

    -- Main Window
    local window = Instance.new("Frame")
    window.Name = "MainWindow"
    window.Size = UDim2.new(0, 560, 0, 420)
    window.Position = UDim2.new(0.5, 0, 0.5, 0)
    window.AnchorPoint = Vector2.new(0.5, 0.5)
    window.BackgroundColor3 = getgenv().CurrentTheme.Background
    window.BackgroundTransparency = 0.15
    window.BorderSizePixel = 0
    window.ClipsDescendants = true
    window.Visible = false
    Instance.new("UICorner", window).CornerRadius = UDim.new(0, 18)
    window.Parent = gui

    local stroke = Instance.new("UIStroke", window)
    stroke.Thickness = 3.2
    stroke.Color = getgenv().CurrentTheme.Highlight
    stroke.Transparency = 0.05

    local gradient = Instance.new("UIGradient", stroke)
    gradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, getgenv().CurrentTheme.Highlight),
        ColorSequenceKeypoint.new(0.25, Color3.new(1,1,1)),
        ColorSequenceKeypoint.new(0.5, getgenv().CurrentTheme.Highlight),
        ColorSequenceKeypoint.new(1, getgenv().CurrentTheme.Highlight)
    }

    local glow = Instance.new("ImageLabel", window)
    glow.Size = UDim2.new(1, 70, 1, 70)
    glow.Position = UDim2.new(0.5, 0, 0.5, 0)
    glow.AnchorPoint = Vector2.new(0.5, 0.5)
    glow.BackgroundTransparency = 1
    glow.Image = "rbxassetid://4996891970"
    glow.ImageColor3 = getgenv().CurrentTheme.Highlight
    glow.ImageTransparency = 0.6
    glow.ZIndex = 4

    task.spawn(function()
        while task.wait(0.03) do
            gradient.Rotation = (gradient.Rotation + 2) % 360
        end
    end)

    -- Title Bar
    local titleBar = Instance.new("Frame", window)
    titleBar.Size = UDim2.new(1,0,0,38)
    titleBar.BackgroundColor3 = Color3.fromRGB(30,30,30)
    titleBar.BorderSizePixel = 0
    titleBar.ZIndex = 50
    Instance.new("UICorner", titleBar).CornerRadius = UDim.new(0,18)

    local title = Instance.new("TextLabel", titleBar)
    title.Text = config.Name
    title.Font = Enum.Font.GothamBold
    title.TextSize = 16
    title.TextColor3 = Color3.fromRGB(235,235,245)
    title.BackgroundTransparency = 1
    title.Size = UDim2.new(0, 200, 1, 0)
    title.Position = UDim2.new(0, 14, 0, 0)
    title.TextXAlignment = Enum.TextXAlignment.Left

    local fpsLabel = Instance.new("TextLabel", titleBar)
    fpsLabel.Position = UDim2.new(0, 210, 0, 0)
    fpsLabel.Size = UDim2.new(0, 80, 1, 0)
    fpsLabel.BackgroundTransparency = 1
    fpsLabel.Font = Enum.Font.GothamBold
    fpsLabel.TextSize = 14
    fpsLabel.TextColor3 = Color3.fromRGB(0,255,0)
    fpsLabel.Text = "FPS: 0"

    local pingLabel = Instance.new("TextLabel", titleBar)
    pingLabel.Position = UDim2.new(0, 110, 0, 0)
    pingLabel.Size = UDim2.new(0, 100, 1, 0)
    pingLabel.BackgroundTransparency = 1
    pingLabel.Font = Enum.Font.GothamBold
    pingLabel.TextSize = 14
    pingLabel.TextColor3 = Color3.fromRGB(0,255,0)
    pingLabel.Text = "PING: 0ms"

    RunService.RenderStepped:Connect(function()
        local fps = math.floor(1 / task.wait())
        fpsLabel.Text = "FPS: "..fps
        fpsLabel.TextColor3 = fps >= 60 and Color3.fromRGB(0,255,0) or Color3.fromRGB(255,80,80)

        local ping = Stats.Network.ServerStatsItem["Data Ping"]:GetValue()
        pingLabel.Text = "PING: "..math.floor(ping).."ms"
        pingLabel.TextColor3 = ping <= 80 and Color3.fromRGB(0,255,0) or Color3.fromRGB(255,220,0)
    end)

    -- Close & Minimize
    local function makeBtn(txt, close)
        local b = Instance.new("TextButton", titleBar)
        b.Text = txt
        b.Size = UDim2.fromOffset(32,24)
        b.BackgroundColor3 = getgenv().CurrentTheme.Accent
        b.TextColor3 = getgenv().CurrentTheme.Text
        b.Font = Enum.Font.GothamBold
        b.TextSize = 16
        Instance.new("UICorner", b).CornerRadius = UDim.new(0,6)
        return b
    end

    local closeBtn = makeBtn("X", true)
    closeBtn.Position = UDim2.new(1, -6, 0.5, -12)
    closeBtn.AnchorPoint = Vector2.new(1,0)

    local minBtn = makeBtn("—")
    minBtn.Position = UDim2.new(1, -46, 0.5, -12)
    minBtn.AnchorPoint = Vector2.new(1,0)

    -- Dragging
    local dragging = false
    titleBar.InputBegan:Connect(function(i)
        if i.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            local start = i.Position
            local startPos = window.Position
            i.Changed:Connect(function()
                if i.UserInputState == Enum.UserInputState.End then dragging = false end
            end)
            UserInputService.InputChanged:Connect(function(inp)
                if dragging and inp.UserInputType == Enum.UserInputType.MouseMovement then
                    local delta = inp.Position - start
                    window.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
                end
            end)
        end
    end)

    window.Visible = true
    TweenService:Create(window, TweenInfo.new(0.9, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {Size = UDim2.new(0,560,0,420)}):Play()

    getgenv().showNotification("مرحباً يا "..player.DisplayName, "Felixz Hub v3.0 Neon تم تحميله بنجاح!", 5)

    local Window = {}
    Window.Tabs = {}

    function Window:CreateTab(tabConfig)
        -- باقي الدوال (Toggle, Slider, Button...) تكمل نفس الطريقة القديمة مع تحديث الألوان من getgenv().CurrentTheme
        -- لأن الكود طويل جداً، أرسل لك الجزء الثاني بعد دقيقة إذا تبي
    end

    return Window
end

print("Felixz UI v3.0 Neon Loaded Successfully! - By Grok for Felixz")
return FelixzUI
